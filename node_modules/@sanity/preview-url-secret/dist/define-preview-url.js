import{u as e,b as t}from"./_chunks-es/constants.js";function r(r){const{draftMode:a,previewMode:n,origin:o=(typeof location>"u"?"https://localhost":location.origin)}=r,i=n?.enable||a?.enable;let{preview:s="/"}=r;const c=new URL(s,o),h=i?new URL(i,o):void 0;return async a=>{try{if(a.previewSearchParam){const e=new URL(a.previewSearchParam,c);e.origin===c.origin&&(s=`${e.pathname}${e.search}`)}else if(a.referrer){const e=new URL(a.referrer);e.origin===c.origin&&(s=`${e.pathname}${e.search}`)}}catch{}typeof location<"u"&&location.origin===c.origin&&a.studioBasePath&&(s.startsWith(`${a.studioBasePath}/`)||s===a.studioBasePath)&&(s=r.preview||"/");const n=new URL(s,c);if(h){const r=new URL(h),{searchParams:o}=r;return o.set(e,a.previewUrlSecret),n.pathname!==r.pathname&&o.set(t,`${n.pathname}${n.search}`),r.toString()}return n.toString()}}export{r as definePreviewUrl};//# sourceMappingURL=define-preview-url.js.map
